<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>行きたい！リスト – 観光スポット紹介</title>
  <meta name="description" content="観光スポットを写真と一言で紹介するシンプルな静的ページ" />

  <!-- 外部CSS（キャッシュ無効化用のバージョン付与は任意で更新） -->
  <link rel="stylesheet" href="./styles.css?v=2">

  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <script defer src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
</head>



<body id="top">
  <!-- Header -->
  <header class="header">
    <div class="inner">
      <div class="row">
        <a class="brand" href="#top" aria-label="ホームへ">
          <span class="logo" aria-hidden="true"></span>
          <span>行きたい！リスト</span>
        </a>
        <button id="menuBtn" class="hamburger" aria-label="メニュー" aria-controls="siteNav" aria-expanded="false">
          <span class="bars" aria-hidden="true"></span>
          <span class="sr-only">メニューを開閉</span>
        </button>
        <nav id="siteNav" class="nav" aria-label="サイトメニュー">
          <ul>
            <li><a href="#about">このアプリは</a></li>
            <li><a href="#register">いますぐ登録</a></li>
            <li><a href="#author">製作者</a></li>
          </ul>
        </nav>
      </div>
    </div>
  </header>

  <!-- Hero -->
  <main>
    <section class="hero" aria-labelledby="hero-title">
      <h1 id="hero-title" class="sr-only">観光スポット紹介アプリ</h1>
      <div class="photos">
        <figure class="photo">
          <img src="assets/Sinsuke1.png" alt="温泉の写真1" />
           <figcaption class="description">
            島田紳助プロデュース！一泊30万円！</figcaption>
        </figure>
        <figure class="photo">
          <img src="assets/Sinsuke2.png" alt="温泉の写真2" />
           <figcaption class="description">
            滝の音を聞きながら入る極上の露天風呂。</figcaption>
        </figure>
<!-- 3 -->
<figure class="photo">
  <img src="assets/Sinsuke3.png" alt="温泉の写真3" />
  <figcaption class="description">絶景を望める露天風呂。心も体もリラックス。</figcaption>
</figure>

<!-- 4 -->
<figure class="photo">
  <img src="assets/Sinsuke4.png" alt="温泉の写真4" />
  <figcaption class="description">渓流沿いの宿、せせらぎを聞きながらのひととき。</figcaption>
</figure>

<!-- 5 -->
<figure class="photo">
  <img src="assets/Sinsuke5.png" alt="温泉の写真5" />
  <figcaption class="description">夕暮れ時が特におすすめの絶景スポット。</figcaption>
</figure>

<!-- 6 -->
<figure class="photo">
  <img src="assets/Sinsuke6.png" alt="温泉の写真6" />
  <figcaption class="description">四季折々の景色を楽しめる大露天風呂。</figcaption>
</figure>

      </div>
    </section>

    <!-- アプリ説明 -->
    <section id="about" class="card" aria-labelledby="about-title">
      <h2 id="about-title" class="lead">このアプリは</h2>
      <p class="muted">
        写真と地図ピン、ひとことレビューで「行きたい」温泉をサッと共有できる、温泉スポット紹介のミニアプリです。
      </p>
      <div>
        <a id="register" class="btn btn-primary" href="#" role="button">いますぐ登録</a>
      </div>
    </section>

    <!-- モーダル：登録フォーム -->
    <div id="registerModal" class="modal">
      <div class="modal-content">
        <span class="close-btn" id="closeModal">&times;</span>
        <h3>温泉施設を入力してください</h3>
        <input type="text" id="spotName" placeholder="例：箱根温泉" style="width:100%; padding:8px; border-radius:6px; margin-top:8px;">
        <button id="searchBtn" class="btn btn-primary" style="margin-top:10px;">検索</button>
        <div id="map"></div>
        <div class="photo-result">
          <img id="spotPhoto" src="" alt="">
        </div>
      </div>
    </div>

    <!-- 製作者 -->
    <section id="author" class="card" aria-labelledby="author-title">
      <h2 id="author-title" class="lead">製作者</h2>
      <ul class="authors">
        <li class="author"><span class="name">ダーモさん</span></li>
        <li class="author"><span class="name">リオン</span></li>
        <li class="author"><span class="name">ひだか</span></li>
      </ul>
    </section>
  </main>

  <footer>
    <small>© <span id="y"></span> 行きたい！リスト</small>
  </footer>

  <!-- 上に戻るボタン -->
  <button id="backToTop" aria-label="上に戻る">↑</button>

  <script>
    // 年号
    document.getElementById('y').textContent = new Date().getFullYear();

    // ハンバーガーメニュー開閉
    const menuBtn = document.getElementById('menuBtn');
    const nav = document.getElementById('siteNav');
    menuBtn.addEventListener('click', () => {
      const open = nav.classList.toggle('open');
      menuBtn.setAttribute('aria-expanded', String(open));
    });
    document.addEventListener('click', (e) => {
      if (!nav.contains(e.target) && !menuBtn.contains(e.target)) {
        nav.classList.remove('open');
        menuBtn.setAttribute('aria-expanded', 'false');
      }
    });

    // 上に戻るボタン
    const toTop = document.getElementById('backToTop');
    window.addEventListener('scroll', () => {
      if (window.scrollY > 300) { toTop.classList.add('show'); }
      else { toTop.classList.remove('show'); }
    });
    toTop.addEventListener('click', () => {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });

    // モーダル開閉
    const registerBtn = document.getElementById('register');
    const modal = document.getElementById('registerModal');
    const closeModalBtn = document.getElementById('closeModal');

    registerBtn.addEventListener('click', (e) => {
      e.preventDefault();
      modal.style.display = "flex";
    });
    closeModalBtn.addEventListener('click', () => {
      modal.style.display = "none";
    });
    window.addEventListener('click', (e) => {
      if (e.target == modal) modal.style.display = "none";
    });

    // Leaflet.js マップ
    let map = L.map('map').setView([35.681236, 139.767125], 13); // 初期は東京駅
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '© OpenStreetMap contributors'
    }).addTo(map);

    let marker;

    document.getElementById('searchBtn').addEventListener('click', () => {
      const spot = document.getElementById('spotName').value;
      if (!spot) return alert('温泉施設名を入力してください');

      // Nominatim API で住所→緯度経度取得
      fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(spot)}`)
        .then(response => response.json())
        .then(data => {
          if (data.length === 0) {
            alert('場所が見つかりませんでした');
            return;
          }
          const lat = parseFloat(data[0].lat);
          const lon = parseFloat(data[0].lon);
          map.setView([lat, lon], 15);

          // ピンを立てる
          if (marker) map.removeLayer(marker);
          marker = L.marker([lat, lon]).addTo(map).bindPopup(spot).openPopup();

          // 簡易写真表示（固定）
          document.getElementById('spotPhoto').src = 'assets/Sinsuke1.png';
          document.getElementById('spotPhoto').alt = spot + 'の写真';
        })
        .catch(() => alert('地図情報の取得に失敗しました'));
    });
  </script>
</body>
</html>
